# Permission Management Rule
# 권한 거부 시 글로벌 추가 제안 규칙

id: permissions-001
name: 권한 거부 시 글로벌 추가 제안
description: |
  Bash 명령이 권한 거부되면 사용자에게 글로벌 허용 목록 추가를 제안합니다.

  동작:
  1. 권한 거부 발생 시 사용자에게 물어보기
  2. 승인 시 ~/.claude/settings.json의 permissions.allow에 추가
  3. 형식: "Bash(명령어:*)"

  예시 대화:
  - "이 명령(jq)을 글로벌 허용 목록에 추가할까요?"
  - 사용자 승인 → settings.json 수정

category: workflow
tags:
  - permissions
  - claude-code
  - settings

severity: info

examples:
  good:
    - |
      [권한 거부됨]
      → "jq 명령을 글로벌 허용 목록에 추가할까요?"
      → 사용자: "응"
      → ~/.claude/settings.json에 "Bash(jq:*)" 추가
    - |
      [권한 거부됨]
      → "source 명령을 글로벌 허용 목록에 추가할까요?"
      → 사용자: "아니"
      → 추가하지 않음
  bad:
    - "권한 거부 후 아무 제안 없이 진행"
    - "사용자 확인 없이 자동으로 권한 추가"

exceptions:
  - sudo, rm -rf 등 위험한 명령은 추가 제안하지 않음
  - deny 목록에 있는 명령은 제안하지 않음

related:
  - git-001

created: "2025-01-18T00:00:00Z"
updated: "2025-01-18T00:00:00Z"
scope: global
enabled: true
autoApply: true

metadata:
  version: "1.0.0"
  status: active
  author: "@kent"
  changelog:
    - version: "1.0.0"
      date: "2025-01-18T00:00:00Z"
      author: "@kent"
      changes: "초기 버전 생성"

dependencies:
  requires: []
  conflicts: []
  extends: null

conditions:
  filePatterns: []
  excludePatterns: []

# 위험 명령 목록 (이 명령들은 글로벌 추가 제안하지 않음)
dangerousCommands:
  - sudo
  - rm -rf
  - dd
  - mkfs
  - fdisk
  - "> /dev"
  - chmod 777
  - chown root

platforms:
  cursor:
    enabled: false
    includeInRules: false
  claude:
    enabled: true
